# Vite Plugin

- èƒ½å¤Ÿæ„å»ºå‡ºæ»¡è¶³ `Module Federation` åŠ è½½è§„èŒƒçš„æ¨¡å—
- èƒ½å¤Ÿä½¿ç”¨åˆ«åæ¶ˆè´¹ `Module Federation` è§„èŒƒçš„æ¨¡å—
- èƒ½å¤Ÿè®¾ç½®æ¨¡å—çš„å…±äº«ä¾èµ–é…ç½®ï¼Œå½“åŠ è½½æ¨¡å—çš„å®¿ä¸»ç¯å¢ƒå·²ç»å­˜åœ¨å¯¹åº”ä¾èµ–æ—¶å°†ä¸ä¼šé‡å¤åŠ è½½

:::warning ä¸æ”¯æŒçš„é€‰é¡¹
é™¤äº†[devã€dts](../../configure/dev.html) é€‰é¡¹å¤–ï¼Œå…¶ä»–é€‰é¡¹å…¨éƒ¨æ”¯æŒ
:::
- roadmap ğŸ—“ï¸
  - å½“æ¨¡å—å…·å¤‡è¿œç¨‹ç±»å‹æ—¶å°†ä¼šè‡ªåŠ¨æŠŠè¿œç¨‹æ¨¡å—çš„ç±»å‹ä¸‹è½½ä¸‹æ¥æ¶ˆè´¹
  - æ¶ˆè´¹è¿œç¨‹æ¨¡å—æ—¶å°†å…·å¤‡çƒ­æ›´æ–°èƒ½åŠ›
  - nuxt ssr 

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

ä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„å‘½ä»¤å®‰è£…æ’ä»¶ï¼š

import { PackageManagerTabs } from '@theme';

<PackageManagerTabs
  command={{
    npm: 'npm add @module-federation/vite --save',
    yarn: 'yarn add @module-federation/vite --save',
    pnpm: 'pnpm add @module-federation/vite --save',
    bun: 'bun add @module-federation/vite --save',
  }}
/>

### æ³¨å†Œæ’ä»¶

åœ¨ `vite` ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ `vite.config.js` é…ç½®æ–‡ä»¶ä¸­çš„ `plugins` é…ç½®é¡¹æ¥æ·»åŠ æ’ä»¶ï¼š

```ts title='vite.config.js'
import { federation } from '@module-federation/vite';
module.exports = {
  server: {
    origin: 'http://localhost:2000',
    port: 2000,
  },
  remotes: {
    esm_remote: {
      type: "module",
      name: "esm_remote",
      entry: "https://[...]/remoteEntry.js",
    },
    var_remote: "var_remote@https://[...]/remoteEntry.js",
  },
  base: "http://localhost:2000",
  plugins: [
    federation({
      name: 'vite_provider',
      manifest: true,
      exposes: {
        './button': './src/components/button',
      },
      shared: {
        react: {
          singleton: true,
        },
        'react/': {
          singleton: true,
        },
      },
    }),
  ],
  // Do you need to support build targets lower than chrome89?
  // You can use 'vite-plugin-top-level-await' plugin for that.
  build: {
    target: 'chrome89',
  },
};
```

## é…ç½®æ„å»ºæ’ä»¶

- Type: `ModuleFederationPlugin(options: ModuleFederationOptions)`

- Module federation æ’ä»¶çš„é…ç½®ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š

```ts
type ModuleFederationOptions {
    name: string;
    filename?: string,
    remotes?: Array<RemoteInfo>;
    shared?: ShareInfos;
};
```

ä½ å¯ä»¥åœ¨ [Config æ€»è§ˆ](../../configure/index) é¡µé¢æ‰¾åˆ°æ‰€æœ‰é…ç½®é¡¹çš„è¯¦ç»†è¯´æ˜ã€‚
