{"version":3,"file":"client0.js","mappings":"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","sources":["webpack://app1/../framework/dist/router.js"],"sourcesContent":["'use client';\n\"use strict\";\nvar __webpack_require__ = {};\n(()=>{\n    __webpack_require__.d = (exports1, definition)=>{\n        for(var key in definition)if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports1, key)) Object.defineProperty(exports1, key, {\n            enumerable: true,\n            get: definition[key]\n        });\n    };\n})();\n(()=>{\n    __webpack_require__.o = (obj, prop)=>Object.prototype.hasOwnProperty.call(obj, prop);\n})();\n(()=>{\n    __webpack_require__.r = (exports1)=>{\n        if ('undefined' != typeof Symbol && Symbol.toStringTag) Object.defineProperty(exports1, Symbol.toStringTag, {\n            value: 'Module'\n        });\n        Object.defineProperty(exports1, '__esModule', {\n            value: true\n        });\n    };\n})();\nvar __webpack_exports__ = {};\n__webpack_require__.r(__webpack_exports__);\n__webpack_require__.d(__webpack_exports__, {\n    Router: ()=>Router,\n    useMutation: ()=>useMutation,\n    callServer: ()=>callServer,\n    useRouter: ()=>useRouter,\n    initFromSSR: ()=>initFromSSR\n});\nconst jsx_runtime_namespaceObject = require(\"react/jsx-runtime\");\nconst external_react_namespaceObject = require(\"react\");\nconst client_namespaceObject = require(\"@module-federation/react-server-dom-webpack/client\");\n'use client';\nconst RSC_ACTION_HEADER = 'rsc-action';\nasync function callServer(actionId, args) {\n    const body = await (0, client_namespaceObject.encodeReply)(args);\n    const response = await fetch('/react', {\n        method: 'POST',\n        headers: {\n            Accept: 'text/x-component',\n            [RSC_ACTION_HEADER]: actionId\n        },\n        body\n    });\n    if (!response.ok) throw new Error(`Server action failed: ${await response.text()}`);\n    const resultHeader = response.headers.get('X-Action-Result');\n    const actionResult = resultHeader ? JSON.parse(resultHeader) : void 0;\n    return actionResult;\n}\nconst RouterContext = /*#__PURE__*/ (0, external_react_namespaceObject.createContext)();\nconst initialCache = new Map();\nfunction initFromSSR(rscData) {\n    const initialLocation = {\n        selectedId: null,\n        isEditing: false,\n        searchText: ''\n    };\n    const locationKey = JSON.stringify(initialLocation);\n    const encoder = new TextEncoder();\n    const stream = new ReadableStream({\n        start (controller) {\n            controller.enqueue(encoder.encode(rscData));\n            controller.close();\n        }\n    });\n    const content = (0, client_namespaceObject.createFromReadableStream)(stream);\n    initialCache.set(locationKey, content);\n}\nfunction Router() {\n    const [cache, setCache] = (0, external_react_namespaceObject.useState)(initialCache);\n    const [location, setLocation] = (0, external_react_namespaceObject.useState)({\n        selectedId: null,\n        isEditing: false,\n        searchText: ''\n    });\n    const locationKey = JSON.stringify(location);\n    let content = cache.get(locationKey);\n    if (!content) {\n        content = (0, client_namespaceObject.createFromFetch)(fetch('/react?location=' + encodeURIComponent(locationKey)));\n        cache.set(locationKey, content);\n    }\n    function refresh(response) {\n        (0, external_react_namespaceObject.startTransition)(()=>{\n            const nextCache = new Map();\n            if (null != response) {\n                const locationKey = response.headers.get('X-Location');\n                const nextLocation = JSON.parse(locationKey);\n                const nextContent = (0, client_namespaceObject.createFromReadableStream)(response.body);\n                nextCache.set(locationKey, nextContent);\n                navigate(nextLocation);\n            }\n            setCache(nextCache);\n        });\n    }\n    function navigate(nextLocation) {\n        (0, external_react_namespaceObject.startTransition)(()=>{\n            setLocation((loc)=>({\n                    ...loc,\n                    ...nextLocation\n                }));\n        });\n    }\n    return /*#__PURE__*/ (0, jsx_runtime_namespaceObject.jsx)(RouterContext.Provider, {\n        value: {\n            location,\n            navigate,\n            refresh\n        },\n        children: (0, external_react_namespaceObject.use)(content)\n    });\n}\nfunction useRouter() {\n    const context = (0, external_react_namespaceObject.useContext)(RouterContext);\n    if (!context) return {\n        location: {\n            selectedId: null,\n            isEditing: false,\n            searchText: ''\n        },\n        navigate: ()=>{},\n        refresh: ()=>{}\n    };\n    return context;\n}\nfunction useMutation({ endpoint, method }) {\n    const { refresh } = useRouter();\n    const [isSaving, setIsSaving] = (0, external_react_namespaceObject.useState)(false);\n    const [didError, setDidError] = (0, external_react_namespaceObject.useState)(false);\n    const [error, setError] = (0, external_react_namespaceObject.useState)(null);\n    if (didError) throw error;\n    async function performMutation(payload, requestedLocation) {\n        setIsSaving(true);\n        try {\n            const response = await fetch(`${endpoint}?location=${encodeURIComponent(JSON.stringify(requestedLocation))}`, {\n                method,\n                body: JSON.stringify(payload),\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n            if (!response.ok) throw new Error(await response.text());\n            refresh(response);\n        } catch (e) {\n            setDidError(true);\n            setError(e);\n        } finally{\n            setIsSaving(false);\n        }\n    }\n    return [\n        isSaving,\n        performMutation\n    ];\n}\nexports.Router = __webpack_exports__.Router;\nexports.callServer = __webpack_exports__.callServer;\nexports.initFromSSR = __webpack_exports__.initFromSSR;\nexports.useMutation = __webpack_exports__.useMutation;\nexports.useRouter = __webpack_exports__.useRouter;\nfor(var __webpack_i__ in __webpack_exports__)if (-1 === [\n    \"Router\",\n    \"callServer\",\n    \"initFromSSR\",\n    \"useMutation\",\n    \"useRouter\"\n].indexOf(__webpack_i__)) exports[__webpack_i__] = __webpack_exports__[__webpack_i__];\nObject.defineProperty(exports, '__esModule', {\n    value: true\n});\n"],"names":["__webpack_require__","d","exports1","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","__webpack_exports__","Router","useMutation","callServer","useRouter","initFromSSR","jsx_runtime_namespaceObject","require","external_react_namespaceObject","client_namespaceObject","RSC_ACTION_HEADER","actionId","args","body","encodeReply","response","fetch","method","headers","Accept","ok","Error","text","resultHeader","actionResult","JSON","parse","RouterContext","createContext","initialCache","Map","rscData","initialLocation","selectedId","isEditing","searchText","locationKey","stringify","encoder","TextEncoder","stream","ReadableStream","start","controller","enqueue","encode","close","content","createFromReadableStream","set","cache","setCache","useState","location","setLocation","createFromFetch","encodeURIComponent","refresh","startTransition","nextCache","nextLocation","nextContent","navigate","loc","jsx","Provider","children","use","context","useContext","endpoint","isSaving","setIsSaving","didError","setDidError","error","setError","performMutation","payload","requestedLocation","e","exports","__webpack_i__","indexOf"],"sourceRoot":""}