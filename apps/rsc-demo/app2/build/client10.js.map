{"version":3,"file":"client10.js","mappings":"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","sources":["webpack://app2/ignored|/Users/bytedance/Library/pnpm/store/v10/links/@/postcss/8.4.38/878be5909e3fbab1ffdc821f8b7b701899d71ead73155cc5e91034a405489c34/node_modules/postcss/lib|./terminal-highlight","webpack://app2/ignored|/Users/bytedance/Library/pnpm/store/v10/links/@/postcss/8.4.38/878be5909e3fbab1ffdc821f8b7b701899d71ead73155cc5e91034a405489c34/node_modules/postcss/lib|fs","webpack://app2/ignored|/Users/bytedance/Library/pnpm/store/v10/links/@/postcss/8.4.38/878be5909e3fbab1ffdc821f8b7b701899d71ead73155cc5e91034a405489c34/node_modules/postcss/lib|path","webpack://app2/ignored|/Users/bytedance/Library/pnpm/store/v10/links/@/postcss/8.4.38/878be5909e3fbab1ffdc821f8b7b701899d71ead73155cc5e91034a405489c34/node_modules/postcss/lib|source-map-js","webpack://app2/ignored|/Users/bytedance/Library/pnpm/store/v10/links/@/postcss/8.4.38/878be5909e3fbab1ffdc821f8b7b701899d71ead73155cc5e91034a405489c34/node_modules/postcss/lib|url","webpack://app2/../framework/framework/router.js","webpack://app2/../shared/src/TextWithMarkdown.js","webpack://app2/../shared/src/NotePreview.js","webpack://app2/../shared/src/NoteEditor.js"],"sourcesContent":["/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/**\n * Shared router implementation for the RSC notes apps.\n *\n * This is imported directly by both app1 and app2 so that navigation,\n * callServer, and SSR integration stay in sync.\n */\n\n'use client';\n\nimport {\n  createContext,\n  startTransition,\n  useContext,\n  useState,\n  use,\n} from 'react';\nimport {\n  createFromFetch,\n  createFromReadableStream,\n  encodeReply,\n} from '@module-federation/react-server-dom-webpack/client';\n\n// RSC Action header (must match server)\nconst RSC_ACTION_HEADER = 'rsc-action';\n\nexport async function callServer(actionId, args) {\n  const body = await encodeReply(args);\n\n  const response = await fetch('/react', {\n    method: 'POST',\n    headers: {\n      Accept: 'text/x-component',\n      [RSC_ACTION_HEADER]: actionId,\n    },\n    body,\n  });\n\n  if (!response.ok) {\n    throw new Error(`Server action failed: ${await response.text()}`);\n  }\n\n  const resultHeader = response.headers.get('X-Action-Result');\n  const actionResult = resultHeader ? JSON.parse(resultHeader) : undefined;\n\n  return actionResult;\n}\n\nconst RouterContext = createContext();\nconst initialCache = new Map();\n\nexport function initFromSSR(rscData) {\n  const initialLocation = {\n    selectedId: null,\n    isEditing: false,\n    searchText: '',\n  };\n  const locationKey = JSON.stringify(initialLocation);\n\n  const encoder = new TextEncoder();\n  const stream = new ReadableStream({\n    start(controller) {\n      controller.enqueue(encoder.encode(rscData));\n      controller.close();\n    },\n  });\n\n  const content = createFromReadableStream(stream);\n  initialCache.set(locationKey, content);\n}\n\nexport function Router() {\n  const [cache, setCache] = useState(initialCache);\n  const [location, setLocation] = useState({\n    selectedId: null,\n    isEditing: false,\n    searchText: '',\n  });\n\n  const locationKey = JSON.stringify(location);\n  let content = cache.get(locationKey);\n  if (!content) {\n    content = createFromFetch(\n      fetch('/react?location=' + encodeURIComponent(locationKey)),\n    );\n    cache.set(locationKey, content);\n  }\n\n  function refresh(response) {\n    startTransition(() => {\n      const nextCache = new Map();\n      if (response != null) {\n        const locationKey = response.headers.get('X-Location');\n        const nextLocation = JSON.parse(locationKey);\n        const nextContent = createFromReadableStream(response.body);\n        nextCache.set(locationKey, nextContent);\n        navigate(nextLocation);\n      }\n      setCache(nextCache);\n    });\n  }\n\n  function navigate(nextLocation) {\n    startTransition(() => {\n      setLocation((loc) => ({\n        ...loc,\n        ...nextLocation,\n      }));\n    });\n  }\n\n  return (\n    <RouterContext.Provider value={{ location, navigate, refresh }}>\n      {use(content)}\n    </RouterContext.Provider>\n  );\n}\n\nexport function useRouter() {\n  const context = useContext(RouterContext);\n  if (!context) {\n    return {\n      location: { selectedId: null, isEditing: false, searchText: '' },\n      navigate: () => {},\n      refresh: () => {},\n    };\n  }\n  return context;\n}\n\nexport function useMutation({ endpoint, method }) {\n  const { refresh } = useRouter();\n  const [isSaving, setIsSaving] = useState(false);\n  const [didError, setDidError] = useState(false);\n  const [error, setError] = useState(null);\n  if (didError) {\n    throw error;\n  }\n\n  async function performMutation(payload, requestedLocation) {\n    setIsSaving(true);\n    try {\n      const response = await fetch(\n        `${endpoint}?location=${encodeURIComponent(\n          JSON.stringify(requestedLocation),\n        )}`,\n        {\n          method,\n          body: JSON.stringify(payload),\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        },\n      );\n      if (!response.ok) {\n        throw new Error(await response.text());\n      }\n      refresh(response);\n    } catch (e) {\n      setDidError(true);\n      setError(e);\n    } finally {\n      setIsSaving(false);\n    }\n  }\n\n  return [isSaving, performMutation];\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { marked } from 'marked';\nimport sanitizeHtml from 'sanitize-html';\n\nconst allowedTags = sanitizeHtml.defaults.allowedTags.concat([\n  'img',\n  'h1',\n  'h2',\n  'h3',\n]);\nconst allowedAttributes = Object.assign(\n  {},\n  sanitizeHtml.defaults.allowedAttributes,\n  {\n    img: ['alt', 'src'],\n  },\n);\n\nexport default function TextWithMarkdown({ text }) {\n  return (\n    <div\n      className=\"text-with-markdown\"\n      dangerouslySetInnerHTML={{\n        __html: sanitizeHtml(marked(text), {\n          allowedTags,\n          allowedAttributes,\n        }),\n      }}\n    />\n  );\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport TextWithMarkdown from './TextWithMarkdown';\n\nexport default function NotePreview({ body }) {\n  return (\n    <div className=\"note-preview\">\n      <TextWithMarkdown text={body} />\n    </div>\n  );\n}\n","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use client';\n\nimport { useState, useTransition } from 'react';\nimport { useRouter, useMutation } from '@rsc-demo/framework/router';\n\nimport NotePreview from './NotePreview';\n\nexport default function NoteEditor({ noteId, initialTitle, initialBody }) {\n  const [title, setTitle] = useState(initialTitle);\n  const [body, setBody] = useState(initialBody);\n  const { location } = useRouter();\n  const [isNavigating, startNavigating] = useTransition();\n  const [isSaving, saveNote] = useMutation({\n    endpoint: noteId !== null ? `/notes/${noteId}` : `/notes`,\n    method: noteId !== null ? 'PUT' : 'POST',\n  });\n  const [isDeleting, deleteNote] = useMutation({\n    endpoint: `/notes/${noteId}`,\n    method: 'DELETE',\n  });\n\n  async function handleSave() {\n    const payload = { title, body };\n    const requestedLocation = {\n      selectedId: noteId,\n      isEditing: false,\n      searchText: location.searchText,\n    };\n    await saveNote(payload, requestedLocation);\n  }\n\n  async function handleDelete() {\n    const payload = {};\n    const requestedLocation = {\n      selectedId: null,\n      isEditing: false,\n      searchText: location.searchText,\n    };\n    await deleteNote(payload, requestedLocation);\n  }\n\n  const isDraft = noteId === null;\n  return (\n    <div className=\"note-editor\">\n      <form\n        className=\"note-editor-form\"\n        autoComplete=\"off\"\n        onSubmit={(e) => e.preventDefault()}\n      >\n        <label className=\"offscreen\" htmlFor=\"note-title-input\">\n          Enter a title for your note\n        </label>\n        <input\n          id=\"note-title-input\"\n          type=\"text\"\n          value={title}\n          onChange={(e) => {\n            setTitle(e.target.value);\n          }}\n        />\n        <label className=\"offscreen\" htmlFor=\"note-body-input\">\n          Enter the body for your note\n        </label>\n        <textarea\n          id=\"note-body-input\"\n          value={body}\n          onChange={(e) => {\n            setBody(e.target.value);\n          }}\n        />\n      </form>\n      <div className=\"note-editor-preview\">\n        <div className=\"note-editor-menu\" role=\"menubar\">\n          <button\n            className=\"note-editor-done\"\n            disabled={isSaving || isNavigating}\n            onClick={() => handleSave()}\n            role=\"menuitem\"\n          >\n            <img\n              src=\"checkmark.svg\"\n              width=\"14px\"\n              height=\"10px\"\n              alt=\"\"\n              role=\"presentation\"\n            />\n            Done\n          </button>\n          {!isDraft && (\n            <button\n              className=\"note-editor-delete\"\n              disabled={isDeleting || isNavigating}\n              onClick={() => handleDelete()}\n              role=\"menuitem\"\n            >\n              <img\n                src=\"cross.svg\"\n                width=\"10px\"\n                height=\"10px\"\n                alt=\"\"\n                role=\"presentation\"\n              />\n              Delete\n            </button>\n          )}\n        </div>\n        <div className=\"label label--preview\" role=\"status\">\n          Preview\n        </div>\n        <h1 className=\"note-title\">{title}</h1>\n        <NotePreview title={title} body={body} />\n      </div>\n    </div>\n  );\n}\n"],"names":["createContext","startTransition","useContext","useState","use","createFromFetch","createFromReadableStream","encodeReply","jsx","_jsx","RSC_ACTION_HEADER","callServer","actionId","args","body","response","fetch","method","headers","Accept","ok","Error","text","resultHeader","get","actionResult","JSON","parse","undefined","RouterContext","initialCache","Map","initFromSSR","rscData","initialLocation","selectedId","isEditing","searchText","locationKey","stringify","encoder","TextEncoder","stream","ReadableStream","start","controller","enqueue","encode","close","content","set","Router","cache","setCache","location","setLocation","encodeURIComponent","refresh","nextCache","nextLocation","nextContent","navigate","loc","Provider","value","children","useRouter","context","useMutation","endpoint","isSaving","setIsSaving","didError","setDidError","error","setError","performMutation","payload","requestedLocation","e","marked","sanitizeHtml","allowedTags","defaults","concat","allowedAttributes","Object","assign","img","TextWithMarkdown","className","dangerouslySetInnerHTML","__html","NotePreview","useTransition","jsxs","_jsxs","NoteEditor","noteId","initialTitle","initialBody","title","setTitle","setBody","isNavigating","startNavigating","saveNote","isDeleting","deleteNote","handleSave","handleDelete","isDraft","autoComplete","onSubmit","preventDefault","htmlFor","id","type","onChange","target","role","disabled","onClick","src","width","height","alt"],"sourceRoot":""}