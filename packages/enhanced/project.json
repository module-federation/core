{
  "name": "enhanced",
  "$schema": "../../node_modules/nx/schemas/project-schema.json",
  "sourceRoot": "packages/enhanced/src",
  "projectType": "library",
  "tags": ["type:pkg"],
  "targets": {
    "generate:schema": {
      "executor": "nx:run-commands",
      "options": {
        "command": "node src/scripts/compile-schema.js",
        "cwd": "packages/enhanced"
      }
    },
    "build": {
      "executor": "nx:run-commands",
      "outputs": ["{workspaceRoot}/packages/enhanced/dist"],
      "options": {
        "parallel": false,
        "commands": [
          "node -e \"require('fs').rmSync('packages/enhanced/dist',{recursive:true,force:true})\"",
          "pnpm exec tsc -p packages/enhanced/tsconfig.lib.json --outDir packages/enhanced/dist --rootDir packages/enhanced",
          "cp packages/enhanced/*.md packages/enhanced/dist",
          "node -e \"const fs=require('fs');const path=require('path');const src='packages/enhanced/src';const dst='packages/enhanced/dist/src';(function w(d){for(const e of fs.readdirSync(d,{withFileTypes:true})){const p=path.join(d,e.name);if(e.isDirectory())w(p);else if(e.name.endsWith('.d.ts')){const rel=path.relative(src,p);const out=path.join(dst,rel);fs.mkdirSync(path.dirname(out),{recursive:true});fs.copyFileSync(p,out);}}})(src);\""
        ]
      },
      "dependsOn": [
        {
          "target": "build",
          "dependencies": true
        }
      ]
    },
    "lint": {
      "executor": "nx:run-commands",
      "outputs": ["{options.outputFile}"],
      "options": {
        "command": "pnpm exec eslint \"packages/enhanced/**/*.ts\"",
        "forwardAllArgs": false
      }
    },
    "test": {
      "executor": "nx:run-commands",
      "dependsOn": ["build"],
      "options": {
        "parallel": false,
        "commands": [
          {
            "command": "node packages/enhanced/test/scripts/ensure-reshake-fixtures.js",
            "forwardAllArgs": false
          },
          {
            "command": "NODE_OPTIONS=\"--experimental-vm-modules --max-old-space-size=24576\" npx rstest -c packages/enhanced/rstest.config.ts",
            "forwardAllArgs": true
          },
          {
            "command": "NODE_OPTIONS=\"--experimental-vm-modules --max-old-space-size=24576\" npx rstest -c packages/enhanced/rstest.treeshake.serial.config.ts",
            "forwardAllArgs": true
          }
        ]
      }
    },
    "pre-release": {
      "executor": "nx:run-commands",
      "options": {
        "parallel": false,
        "commands": [
          {
            "command": "nx run enhanced:test",
            "forwardAllArgs": false
          },
          {
            "command": "nx run enhanced:build",
            "forwardAllArgs": false
          }
        ]
      }
    }
  }
}
