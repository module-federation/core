{"version":3,"sources":["/Users/bytedance/WebstormProjects/universe/packages/data-prefetch/src/common/runtime-utils.ts"],"sourcesContent":["import { getInstance } from '@module-federation/runtime';\nimport {\n  encodeName,\n  ModuleInfo,\n  MFPrefetchCommon,\n} from '@module-federation/sdk';\n\nexport const getScope = (): string => {\n  return getInstance()!.options.name;\n};\n\nexport const getPrefetchId = (id: string): string =>\n  encodeName(`${id}/${MFPrefetchCommon.identifier}`);\n\nexport const compatGetPrefetchId = (id: string): string =>\n  encodeName(`${id}/VmokPrefetch`);\n\nexport const getSignalFromManifest = (remoteSnapshot: ModuleInfo): boolean => {\n  if (!remoteSnapshot) {\n    return false;\n  }\n\n  if (\n    !('prefetchEntry' in remoteSnapshot) &&\n    !('prefetchInterface' in remoteSnapshot)\n  ) {\n    return false;\n  }\n\n  if (!remoteSnapshot.prefetchEntry && !remoteSnapshot.prefetchInterface) {\n    return false;\n  }\n  return true;\n};\n"],"names":["compatGetPrefetchId","getPrefetchId","getScope","getSignalFromManifest","getInstance","options","name","id","encodeName","MFPrefetchCommon","identifier","remoteSnapshot","prefetchEntry","prefetchInterface"],"mappings":";;;;;;;;;;;IAcaA,mBAAmB;eAAnBA;;IAHAC,aAAa;eAAbA;;IAJAC,QAAQ;eAARA;;IAUAC,qBAAqB;eAArBA;;;yBAjBe;qBAKrB;AAEA,MAAMD,WAAW;IACtB,OAAOE,IAAAA,oBAAW,IAAIC,OAAO,CAACC,IAAI;AACpC;AAEO,MAAML,gBAAgB,CAACM,KAC5BC,IAAAA,eAAU,EAAC,CAAC,EAAED,GAAG,CAAC,EAAEE,qBAAgB,CAACC,UAAU,CAAC,CAAC;AAE5C,MAAMV,sBAAsB,CAACO,KAClCC,IAAAA,eAAU,EAAC,CAAC,EAAED,GAAG,aAAa,CAAC;AAE1B,MAAMJ,wBAAwB,CAACQ;IACpC,IAAI,CAACA,gBAAgB;QACnB,OAAO;IACT;IAEA,IACE,CAAE,CAAA,mBAAmBA,cAAa,KAClC,CAAE,CAAA,uBAAuBA,cAAa,GACtC;QACA,OAAO;IACT;IAEA,IAAI,CAACA,eAAeC,aAAa,IAAI,CAACD,eAAeE,iBAAiB,EAAE;QACtE,OAAO;IACT;IACA,OAAO;AACT"}