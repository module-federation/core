ec0d0117ffdee1206f87e78d06da81aa
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "MFDataPrefetch", {
    enumerable: true,
    get: function() {
        return MFDataPrefetch;
    }
});
const _runtime = require("@module-federation/runtime");
const _sdk = require("@module-federation/sdk");
const _runtimeutils = require("./common/runtime-utils");
// @ts-ignore init global variable for test
globalThis.__FEDERATION__ ??= {};
globalThis.__FEDERATION__.__PREFETCH__ ??= {
    entryLoading: {},
    instance: new Map(),
    __PREFETCH_EXPORTS__: {}
};
class MFDataPrefetch {
    prefetchMemory;
    recordOutdate;
    _exports;
    _options;
    constructor(options){
        this.prefetchMemory = new Map();
        this.recordOutdate = {};
        this._exports = {};
        this._options = options;
        this.global.instance.set(options.name, this);
    }
    get global() {
        return globalThis.__FEDERATION__.__PREFETCH__;
    }
    static getInstance(id) {
        return globalThis.__FEDERATION__.__PREFETCH__.instance.get(id);
    }
    async loadEntry(entry) {
        const { name, remoteSnapshot, remote, origin } = this._options;
        if (entry) {
            const { buildVersion, globalName } = remoteSnapshot;
            const uniqueKey = globalName || `${name}:${buildVersion}`;
            if (!this.global.entryLoading[uniqueKey]) {
                this.global.entryLoading[uniqueKey] = (0, _sdk.loadScript)(entry, {});
            }
            return this.global.entryLoading[uniqueKey];
        } else {
            const remoteInfo = (0, _runtime.getRemoteInfo)(remote);
            const module = origin.moduleCache.get(remoteInfo.name);
            return (0, _runtime.getRemoteEntry)({
                origin: origin,
                remoteInfo,
                remoteEntryExports: module ? module.remoteEntryExports : undefined
            });
        }
    }
    getProjectExports() {
        if (Object.keys(this._exports).length > 0) {
            return this._exports;
        }
        const { name } = this._options;
        const exportsPromise = globalThis.__FEDERATION__.__PREFETCH__.__PREFETCH_EXPORTS__?.[name];
        const resolve = exportsPromise.then((exports1 = {})=>{
            // Match prefetch based on the function name suffix so that other capabilities can be expanded later.
            // Not all functions should be directly identified as prefetch functions
            const memory = {};
            Object.keys(exports1).forEach((key)=>{
                memory[key] = {};
                const exportVal = exports1[key];
                Object.keys(exportVal).reduce((memo, current)=>{
                    if (current.toLocaleLowerCase().endsWith('prefetch') || current.toLocaleLowerCase() === 'default') {
                        memo[current] = exportVal[current];
                    }
                    return memo;
                }, memory[key]);
            });
            this.memorizeExports(memory);
        });
        return resolve;
    }
    memorizeExports(exports1) {
        this._exports = exports1;
    }
    getExposeExports(id) {
        const prefetchId = (0, _runtimeutils.getPrefetchId)(id);
        const compatId = (0, _runtimeutils.compatGetPrefetchId)(id);
        const prefetchExports = this._exports[prefetchId] || this._exports[compatId];
        return prefetchExports || {};
    }
    prefetch(prefetchOptions) {
        const { id, functionId = 'default', refetchParams } = prefetchOptions;
        let prefetchResult;
        const prefetchId = (0, _runtimeutils.getPrefetchId)(id);
        const compatId = (0, _runtimeutils.compatGetPrefetchId)(id);
        const memorizeId = id + functionId;
        const memory = this.prefetchMemory.get(memorizeId);
        if (!this.checkOutdate(prefetchOptions) && memory) {
            return memory;
        }
        const prefetchExports = this._exports[prefetchId] || this._exports[compatId];
        if (!prefetchExports) {
            return;
        }
        const executePrefetch = prefetchExports[functionId];
        if (typeof executePrefetch === 'function') {
            if (refetchParams) {
                prefetchResult = executePrefetch(refetchParams);
            } else {
                prefetchResult = executePrefetch();
            }
        } else {
            throw new Error(`[Module Federation Data Prefetch]: No prefetch function called ${functionId} export in prefetch file`);
        }
        this.memorize(memorizeId, prefetchResult);
        return prefetchResult;
    }
    memorize(id, value) {
        this.prefetchMemory.set(id, value);
    }
    markOutdate(markOptions, isOutdate) {
        const { id, functionId = 'default' } = markOptions;
        if (!this.recordOutdate[id]) {
            this.recordOutdate[id] = {};
        }
        this.recordOutdate[id][functionId] = isOutdate;
    }
    checkOutdate(outdateOptions) {
        const { id, functionId = 'default', cacheStrategy } = outdateOptions;
        if (typeof cacheStrategy === 'function') {
            return cacheStrategy();
        }
        if (!this.recordOutdate[id]) {
            this.recordOutdate[id] = {};
        }
        if (this.recordOutdate[id][functionId]) {
            this.markOutdate({
                id,
                functionId
            }, false);
            return true;
        } else {
            return false;
        }
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9ieXRlZGFuY2UvV2Vic3Rvcm1Qcm9qZWN0cy91bml2ZXJzZS9wYWNrYWdlcy9kYXRhLXByZWZldGNoL3NyYy9wcmVmZXRjaC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBGZWRlcmF0aW9uSG9zdCxcbiAgZ2V0UmVtb3RlRW50cnksXG4gIGdldFJlbW90ZUluZm8sXG59IGZyb20gJ0Btb2R1bGUtZmVkZXJhdGlvbi9ydW50aW1lJztcbmltcG9ydCB7XG4gIGxvYWRTY3JpcHQsXG4gIE1vZHVsZUluZm8sXG4gIFByb3ZpZGVyTW9kdWxlSW5mbyxcbn0gZnJvbSAnQG1vZHVsZS1mZWRlcmF0aW9uL3Nkayc7XG5pbXBvcnQgeyBSZW1vdGUgfSBmcm9tICdAbW9kdWxlLWZlZGVyYXRpb24vcnVudGltZS90eXBlcyc7XG5cbmltcG9ydCB7IGdldFByZWZldGNoSWQsIGNvbXBhdEdldFByZWZldGNoSWQgfSBmcm9tICcuL2NvbW1vbi9ydW50aW1lLXV0aWxzJztcblxuZGVjbGFyZSBtb2R1bGUgJ0Btb2R1bGUtZmVkZXJhdGlvbi9ydW50aW1lJyB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgRmVkZXJhdGlvbiB7XG4gICAgX19QUkVGRVRDSF9fOiB7XG4gICAgICBlbnRyeUxvYWRpbmc6IFJlY29yZDxzdHJpbmcsIHVuZGVmaW5lZCB8IFByb21pc2U8dm9pZD4+O1xuICAgICAgaW5zdGFuY2U6IE1hcDxzdHJpbmcsIE1GRGF0YVByZWZldGNoPjtcbiAgICAgIF9fUFJFRkVUQ0hfRVhQT1JUU19fOiBSZWNvcmQ8c3RyaW5nLCBQcm9taXNlPFJlY29yZDxzdHJpbmcsIGFueT4+PjtcbiAgICB9O1xuICB9XG59XG5cbnR5cGUgUHJlZmV0Y2hFeHBvcnRzID0gUmVjb3JkPHN0cmluZywgYW55PjtcblxuZXhwb3J0IGludGVyZmFjZSBEYXRhUHJlZmV0Y2hPcHRpb25zIHtcbiAgbmFtZTogc3RyaW5nO1xuICByZW1vdGU/OiBSZW1vdGU7XG4gIG9yaWdpbj86IEZlZGVyYXRpb25Ib3N0O1xuICByZW1vdGVTbmFwc2hvdD86IE1vZHVsZUluZm87XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgcHJlZmV0Y2hPcHRpb25zIHtcbiAgaWQ6IHN0cmluZztcbiAgZnVuY3Rpb25JZD86IHN0cmluZztcbiAgY2FjaGVTdHJhdGVneT86ICgpID0+IGJvb2xlYW47XG4gIHJlZmV0Y2hQYXJhbXM/OiBhbnk7XG59XG5cbi8vIEB0cy1pZ25vcmUgaW5pdCBnbG9iYWwgdmFyaWFibGUgZm9yIHRlc3Rcbmdsb2JhbFRoaXMuX19GRURFUkFUSU9OX18gPz89IHt9O1xuZ2xvYmFsVGhpcy5fX0ZFREVSQVRJT05fXy5fX1BSRUZFVENIX18gPz89IHtcbiAgZW50cnlMb2FkaW5nOiB7fSxcbiAgaW5zdGFuY2U6IG5ldyBNYXAoKSxcbiAgX19QUkVGRVRDSF9FWFBPUlRTX186IHt9LFxufTtcbmV4cG9ydCBjbGFzcyBNRkRhdGFQcmVmZXRjaCB7XG4gIHB1YmxpYyBwcmVmZXRjaE1lbW9yeTogTWFwPHN0cmluZywgUHJvbWlzZTxhbnk+PjtcbiAgcHVibGljIHJlY29yZE91dGRhdGU6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+PjtcbiAgcHJpdmF0ZSBfZXhwb3J0czogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgcHJpdmF0ZSBfb3B0aW9uczogRGF0YVByZWZldGNoT3B0aW9ucztcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBEYXRhUHJlZmV0Y2hPcHRpb25zKSB7XG4gICAgdGhpcy5wcmVmZXRjaE1lbW9yeSA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnJlY29yZE91dGRhdGUgPSB7fTtcbiAgICB0aGlzLl9leHBvcnRzID0ge307XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5nbG9iYWwuaW5zdGFuY2Uuc2V0KG9wdGlvbnMubmFtZSwgdGhpcyk7XG4gIH1cblxuICBnZXQgZ2xvYmFsKCk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgIHJldHVybiBnbG9iYWxUaGlzLl9fRkVERVJBVElPTl9fLl9fUFJFRkVUQ0hfXztcbiAgfVxuXG4gIHN0YXRpYyBnZXRJbnN0YW5jZShpZDogc3RyaW5nKTogTUZEYXRhUHJlZmV0Y2ggfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBnbG9iYWxUaGlzLl9fRkVERVJBVElPTl9fLl9fUFJFRkVUQ0hfXy5pbnN0YW5jZS5nZXQoaWQpO1xuICB9XG5cbiAgYXN5bmMgbG9hZEVudHJ5KGVudHJ5OiBzdHJpbmcgfCB1bmRlZmluZWQpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHsgbmFtZSwgcmVtb3RlU25hcHNob3QsIHJlbW90ZSwgb3JpZ2luIH0gPSB0aGlzLl9vcHRpb25zO1xuXG4gICAgaWYgKGVudHJ5KSB7XG4gICAgICBjb25zdCB7IGJ1aWxkVmVyc2lvbiwgZ2xvYmFsTmFtZSB9ID0gcmVtb3RlU25hcHNob3QgYXMgUHJvdmlkZXJNb2R1bGVJbmZvO1xuICAgICAgY29uc3QgdW5pcXVlS2V5ID0gZ2xvYmFsTmFtZSB8fCBgJHtuYW1lfToke2J1aWxkVmVyc2lvbn1gO1xuXG4gICAgICBpZiAoIXRoaXMuZ2xvYmFsLmVudHJ5TG9hZGluZ1t1bmlxdWVLZXldKSB7XG4gICAgICAgIHRoaXMuZ2xvYmFsLmVudHJ5TG9hZGluZ1t1bmlxdWVLZXldID0gbG9hZFNjcmlwdChlbnRyeSwge30pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZ2xvYmFsLmVudHJ5TG9hZGluZ1t1bmlxdWVLZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZW1vdGVJbmZvID0gZ2V0UmVtb3RlSW5mbyhyZW1vdGUgYXMgUmVtb3RlKTtcbiAgICAgIGNvbnN0IG1vZHVsZSA9IG9yaWdpbiEubW9kdWxlQ2FjaGUuZ2V0KHJlbW90ZUluZm8ubmFtZSk7XG4gICAgICByZXR1cm4gZ2V0UmVtb3RlRW50cnkoe1xuICAgICAgICBvcmlnaW46IG9yaWdpbiEsXG4gICAgICAgIHJlbW90ZUluZm8sXG4gICAgICAgIHJlbW90ZUVudHJ5RXhwb3J0czogbW9kdWxlID8gbW9kdWxlLnJlbW90ZUVudHJ5RXhwb3J0cyA6IHVuZGVmaW5lZCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdldFByb2plY3RFeHBvcnRzKCkge1xuICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLl9leHBvcnRzKS5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZXhwb3J0cztcbiAgICB9XG4gICAgY29uc3QgeyBuYW1lIH0gPSB0aGlzLl9vcHRpb25zO1xuICAgIGNvbnN0IGV4cG9ydHNQcm9taXNlID1cbiAgICAgIGdsb2JhbFRoaXMuX19GRURFUkFUSU9OX18uX19QUkVGRVRDSF9fLl9fUFJFRkVUQ0hfRVhQT1JUU19fPy5bbmFtZV07XG4gICAgY29uc3QgcmVzb2x2ZSA9IGV4cG9ydHNQcm9taXNlLnRoZW4oXG4gICAgICAoZXhwb3J0czogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgYW55Pj4gPSB7fSkgPT4ge1xuICAgICAgICAvLyBNYXRjaCBwcmVmZXRjaCBiYXNlZCBvbiB0aGUgZnVuY3Rpb24gbmFtZSBzdWZmaXggc28gdGhhdCBvdGhlciBjYXBhYmlsaXRpZXMgY2FuIGJlIGV4cGFuZGVkIGxhdGVyLlxuICAgICAgICAvLyBOb3QgYWxsIGZ1bmN0aW9ucyBzaG91bGQgYmUgZGlyZWN0bHkgaWRlbnRpZmllZCBhcyBwcmVmZXRjaCBmdW5jdGlvbnNcbiAgICAgICAgY29uc3QgbWVtb3J5OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBhbnk+PiA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhleHBvcnRzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICBtZW1vcnlba2V5XSA9IHt9O1xuICAgICAgICAgIGNvbnN0IGV4cG9ydFZhbCA9IGV4cG9ydHNba2V5XTtcbiAgICAgICAgICBPYmplY3Qua2V5cyhleHBvcnRWYWwpLnJlZHVjZShcbiAgICAgICAgICAgIChtZW1vOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBjdXJyZW50OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGN1cnJlbnQudG9Mb2NhbGVMb3dlckNhc2UoKS5lbmRzV2l0aCgncHJlZmV0Y2gnKSB8fFxuICAgICAgICAgICAgICAgIGN1cnJlbnQudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gJ2RlZmF1bHQnXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIG1lbW9bY3VycmVudF0gPSBleHBvcnRWYWxbY3VycmVudF07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIG1lbW87XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWVtb3J5W2tleV0sXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWVtb3JpemVFeHBvcnRzKG1lbW9yeSk7XG4gICAgICB9LFxuICAgICk7XG4gICAgcmV0dXJuIHJlc29sdmU7XG4gIH1cblxuICBtZW1vcml6ZUV4cG9ydHMoZXhwb3J0czogUmVjb3JkPHN0cmluZywgYW55Pik6IHZvaWQge1xuICAgIHRoaXMuX2V4cG9ydHMgPSBleHBvcnRzO1xuICB9XG5cbiAgZ2V0RXhwb3NlRXhwb3J0cyhpZDogc3RyaW5nKTogUHJlZmV0Y2hFeHBvcnRzIHtcbiAgICBjb25zdCBwcmVmZXRjaElkID0gZ2V0UHJlZmV0Y2hJZChpZCk7XG4gICAgY29uc3QgY29tcGF0SWQgPSBjb21wYXRHZXRQcmVmZXRjaElkKGlkKTtcbiAgICBjb25zdCBwcmVmZXRjaEV4cG9ydHMgPVxuICAgICAgdGhpcy5fZXhwb3J0c1twcmVmZXRjaElkXSB8fCAodGhpcy5fZXhwb3J0c1tjb21wYXRJZF0gYXMgUHJlZmV0Y2hFeHBvcnRzKTtcbiAgICByZXR1cm4gcHJlZmV0Y2hFeHBvcnRzIHx8IHt9O1xuICB9XG5cbiAgcHJlZmV0Y2gocHJlZmV0Y2hPcHRpb25zOiBwcmVmZXRjaE9wdGlvbnMpOiBhbnkge1xuICAgIGNvbnN0IHsgaWQsIGZ1bmN0aW9uSWQgPSAnZGVmYXVsdCcsIHJlZmV0Y2hQYXJhbXMgfSA9IHByZWZldGNoT3B0aW9ucztcbiAgICBsZXQgcHJlZmV0Y2hSZXN1bHQ7XG4gICAgY29uc3QgcHJlZmV0Y2hJZCA9IGdldFByZWZldGNoSWQoaWQpO1xuICAgIGNvbnN0IGNvbXBhdElkID0gY29tcGF0R2V0UHJlZmV0Y2hJZChpZCk7XG4gICAgY29uc3QgbWVtb3JpemVJZCA9IGlkICsgZnVuY3Rpb25JZDtcbiAgICBjb25zdCBtZW1vcnkgPSB0aGlzLnByZWZldGNoTWVtb3J5LmdldChtZW1vcml6ZUlkKTtcbiAgICBpZiAoIXRoaXMuY2hlY2tPdXRkYXRlKHByZWZldGNoT3B0aW9ucykgJiYgbWVtb3J5KSB7XG4gICAgICByZXR1cm4gbWVtb3J5O1xuICAgIH1cblxuICAgIGNvbnN0IHByZWZldGNoRXhwb3J0cyA9XG4gICAgICB0aGlzLl9leHBvcnRzW3ByZWZldGNoSWRdIHx8ICh0aGlzLl9leHBvcnRzW2NvbXBhdElkXSBhcyBQcmVmZXRjaEV4cG9ydHMpO1xuICAgIGlmICghcHJlZmV0Y2hFeHBvcnRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGV4ZWN1dGVQcmVmZXRjaCA9IHByZWZldGNoRXhwb3J0c1tmdW5jdGlvbklkXTtcbiAgICBpZiAodHlwZW9mIGV4ZWN1dGVQcmVmZXRjaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKHJlZmV0Y2hQYXJhbXMpIHtcbiAgICAgICAgcHJlZmV0Y2hSZXN1bHQgPSBleGVjdXRlUHJlZmV0Y2gocmVmZXRjaFBhcmFtcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcmVmZXRjaFJlc3VsdCA9IGV4ZWN1dGVQcmVmZXRjaCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBbTW9kdWxlIEZlZGVyYXRpb24gRGF0YSBQcmVmZXRjaF06IE5vIHByZWZldGNoIGZ1bmN0aW9uIGNhbGxlZCAke2Z1bmN0aW9uSWR9IGV4cG9ydCBpbiBwcmVmZXRjaCBmaWxlYCxcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMubWVtb3JpemUobWVtb3JpemVJZCwgcHJlZmV0Y2hSZXN1bHQpO1xuICAgIHJldHVybiBwcmVmZXRjaFJlc3VsdDtcbiAgfVxuXG4gIG1lbW9yaXplKGlkOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLnByZWZldGNoTWVtb3J5LnNldChpZCwgdmFsdWUpO1xuICB9XG5cbiAgbWFya091dGRhdGUoXG4gICAgbWFya09wdGlvbnM6IE9taXQ8cHJlZmV0Y2hPcHRpb25zLCAnY2FjaGVTdHJhdGVneSc+LFxuICAgIGlzT3V0ZGF0ZTogYm9vbGVhbixcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgeyBpZCwgZnVuY3Rpb25JZCA9ICdkZWZhdWx0JyB9ID0gbWFya09wdGlvbnM7XG4gICAgaWYgKCF0aGlzLnJlY29yZE91dGRhdGVbaWRdKSB7XG4gICAgICB0aGlzLnJlY29yZE91dGRhdGVbaWRdID0ge307XG4gICAgfVxuICAgIHRoaXMucmVjb3JkT3V0ZGF0ZVtpZF1bZnVuY3Rpb25JZF0gPSBpc091dGRhdGU7XG4gIH1cblxuICBjaGVja091dGRhdGUob3V0ZGF0ZU9wdGlvbnM6IHByZWZldGNoT3B0aW9ucyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgaWQsIGZ1bmN0aW9uSWQgPSAnZGVmYXVsdCcsIGNhY2hlU3RyYXRlZ3kgfSA9IG91dGRhdGVPcHRpb25zO1xuICAgIGlmICh0eXBlb2YgY2FjaGVTdHJhdGVneSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGNhY2hlU3RyYXRlZ3koKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucmVjb3JkT3V0ZGF0ZVtpZF0pIHtcbiAgICAgIHRoaXMucmVjb3JkT3V0ZGF0ZVtpZF0gPSB7fTtcbiAgICB9XG4gICAgaWYgKHRoaXMucmVjb3JkT3V0ZGF0ZVtpZF1bZnVuY3Rpb25JZF0pIHtcbiAgICAgIHRoaXMubWFya091dGRhdGUoXG4gICAgICAgIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBmdW5jdGlvbklkLFxuICAgICAgICB9LFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbIk1GRGF0YVByZWZldGNoIiwiZ2xvYmFsVGhpcyIsIl9fRkVERVJBVElPTl9fIiwiX19QUkVGRVRDSF9fIiwiZW50cnlMb2FkaW5nIiwiaW5zdGFuY2UiLCJNYXAiLCJfX1BSRUZFVENIX0VYUE9SVFNfXyIsInByZWZldGNoTWVtb3J5IiwicmVjb3JkT3V0ZGF0ZSIsIl9leHBvcnRzIiwiX29wdGlvbnMiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJnbG9iYWwiLCJzZXQiLCJuYW1lIiwiZ2V0SW5zdGFuY2UiLCJpZCIsImdldCIsImxvYWRFbnRyeSIsImVudHJ5IiwicmVtb3RlU25hcHNob3QiLCJyZW1vdGUiLCJvcmlnaW4iLCJidWlsZFZlcnNpb24iLCJnbG9iYWxOYW1lIiwidW5pcXVlS2V5IiwibG9hZFNjcmlwdCIsInJlbW90ZUluZm8iLCJnZXRSZW1vdGVJbmZvIiwibW9kdWxlIiwibW9kdWxlQ2FjaGUiLCJnZXRSZW1vdGVFbnRyeSIsInJlbW90ZUVudHJ5RXhwb3J0cyIsInVuZGVmaW5lZCIsImdldFByb2plY3RFeHBvcnRzIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImV4cG9ydHNQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJleHBvcnRzIiwibWVtb3J5IiwiZm9yRWFjaCIsImtleSIsImV4cG9ydFZhbCIsInJlZHVjZSIsIm1lbW8iLCJjdXJyZW50IiwidG9Mb2NhbGVMb3dlckNhc2UiLCJlbmRzV2l0aCIsIm1lbW9yaXplRXhwb3J0cyIsImdldEV4cG9zZUV4cG9ydHMiLCJwcmVmZXRjaElkIiwiZ2V0UHJlZmV0Y2hJZCIsImNvbXBhdElkIiwiY29tcGF0R2V0UHJlZmV0Y2hJZCIsInByZWZldGNoRXhwb3J0cyIsInByZWZldGNoIiwicHJlZmV0Y2hPcHRpb25zIiwiZnVuY3Rpb25JZCIsInJlZmV0Y2hQYXJhbXMiLCJwcmVmZXRjaFJlc3VsdCIsIm1lbW9yaXplSWQiLCJjaGVja091dGRhdGUiLCJleGVjdXRlUHJlZmV0Y2giLCJFcnJvciIsIm1lbW9yaXplIiwidmFsdWUiLCJtYXJrT3V0ZGF0ZSIsIm1hcmtPcHRpb25zIiwiaXNPdXRkYXRlIiwib3V0ZGF0ZU9wdGlvbnMiLCJjYWNoZVN0cmF0ZWd5Il0sIm1hcHBpbmdzIjoiOzs7OytCQStDYUE7OztlQUFBQTs7O3lCQTNDTjtxQkFLQTs4QkFHNEM7QUE0Qm5ELDJDQUEyQztBQUMzQ0MsV0FBV0MsY0FBYyxLQUFLLENBQUM7QUFDL0JELFdBQVdDLGNBQWMsQ0FBQ0MsWUFBWSxLQUFLO0lBQ3pDQyxjQUFjLENBQUM7SUFDZkMsVUFBVSxJQUFJQztJQUNkQyxzQkFBc0IsQ0FBQztBQUN6QjtBQUNPLE1BQU1QO0lBQ0pRLGVBQTBDO0lBQzFDQyxjQUF1RDtJQUN0REMsU0FBOEI7SUFDOUJDLFNBQThCO0lBRXRDQyxZQUFZQyxPQUE0QixDQUFFO1FBQ3hDLElBQUksQ0FBQ0wsY0FBYyxHQUFHLElBQUlGO1FBQzFCLElBQUksQ0FBQ0csYUFBYSxHQUFHLENBQUM7UUFDdEIsSUFBSSxDQUFDQyxRQUFRLEdBQUcsQ0FBQztRQUNqQixJQUFJLENBQUNDLFFBQVEsR0FBR0U7UUFDaEIsSUFBSSxDQUFDQyxNQUFNLENBQUNULFFBQVEsQ0FBQ1UsR0FBRyxDQUFDRixRQUFRRyxJQUFJLEVBQUUsSUFBSTtJQUM3QztJQUVBLElBQUlGLFNBQThCO1FBQ2hDLE9BQU9iLFdBQVdDLGNBQWMsQ0FBQ0MsWUFBWTtJQUMvQztJQUVBLE9BQU9jLFlBQVlDLEVBQVUsRUFBOEI7UUFDekQsT0FBT2pCLFdBQVdDLGNBQWMsQ0FBQ0MsWUFBWSxDQUFDRSxRQUFRLENBQUNjLEdBQUcs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